<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="global.css" />
    <link rel="stylesheet" href="chatgpt-styles.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Futura Lt BT:wght@300&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Futura Bk BT:wght@400&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sarabun:wght@500;600&display=swap" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <title>Transactions</title>
    <script src="main.js" defer></script>

</head>

<body>

    <div class="homedefault-container">

        <div class="homedefault-homedefault">

            <img src="chatGPT-assets/Image 7.png" alt="grid0118582" class="homedefault-grid011" />


            <div class="desktop-6-child">


                <div class="topbar">
                    <div class="logo">
                        <img src="chatGPT-assets/GPTAnonymous.svg" alt="GPTI1281" class="code-gpt" />
                        <span class="logo-text">GPT Anonymous</span>
                    </div>
                    <div class="link-container">
                        <a href="wallet.html" class="item">
                            <div>Wallet</div>
                        </a>
                        <div class="item" onclick="openModel()">Buy Tokens</div>
                        <a id="myAnchor" href="https://delighted.com/t/LeMCpLSk" target="_blank" class="item">
                            <div>Feedback</div>
                        </a>
                        <div class="item2" id="bal-div">Balance: 0</div>
                        <a href="settings.html"><img src="chatGPT-assets/settings1109-ca9f.svg" class="setting"
                                alt="settings1109" /></a>
                    </div>

                </div>

                <div class="mid-section">

                    <div id="left-panel" class="homepage-emilyfagenstromhighresolutionzoomedoutpictureofapi">


                        <div class="head">
                            <!-- <img src="chatGPT-assets/aiessentialsiconset1109-efc.svg" alt="AIEssentialsIconSet1109"
                                class="homepage-a-essentials-icon-set6"> -->
                            <span class="text-ai">A.I. Chat</span>
                        </div>
                        <hr class="line">
                        </hr>


                        <a href="home.html" class="link1">
                            <!-- <img src="chatGPT-assets/aiessentialsiconseti1538-ixd.svg" alt="AIEssentialsIconSet1109"
                                class="homepage-a-essentials-icon-set1" /> -->
                            <div class="homepage-text54" style="color:rgb(136,156,231)"><span>Albert</div>
                            <span class="badge" style="display: none;" id="bingCount"><span class="badge-text">
                                    0</span></span>
                        </a>


                        <a href="uncensored.html" class="link2">
                            <!-- <img src="chatGPT-assets/aiessentialsiconseti1538-bs2h.svg" alt="AIEssentialsIconSet1109"
                                class="homepage-a-essentials-icon-set3" /> -->
                            <div class="homepage-text57" style="color:rgb(136,156,231)"><span>Bella</div>
                            <span class="badge1" style="display: none;" id="gptCount"><span
                                    class="badge-text1">0</span></span>
                        </a>



                    </div>


                    <div class="homepage-rectangle783" id="chat-body">

                        <div class="flexContainer2">
                            <!-- <div class=""> -->
                            <!-- <img src="chatGPT-assets/aiessentialsiconseti1538-ixd.svg"
                                        alt="AIEssentialsIconSet1109" class="homepage-a-essentials-icon-set2" /> -->
                            <span class="homepage-text02">Transactions</span>
                            <div class="raida-status " id="signalWrap">
                                <div class="raida">RAIDA</div>
                            </div>
                            <!-- </div> -->
                        </div>
                        <hr class="line1">
                        </hr>

                        <!-- <div class="middle-container"> -->

                        <div class="example-container tableFixHead custom-scrollbar" id="table1">

                            <table id="table" class="trans-table"
                                style="border-spacing: 50px; background-color: #494949;">
                                <thead>
                                    <tr>
                                        <th class="tabheader">Date & Time</th>
                                        <th class="tabheader">Memo</th>
                                        <th class="tabheader">Type</th>
                                        <th class="tabheader">Amount</th>
                                        <th class="tabheader">Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="statements">

                                </tbody>

                            </table>

                        </div>

                        <div class="icons">

                            <a href="wallet.html">
                                <svg class="home-icon" xmlns="http://www.w3.org/2000/svg" fill="#A6AAB4"
                                    class="bi bi-house" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                        d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
                                    <path fill-rule="evenodd"
                                        d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z" />
                                </svg>

                            </a>

                            <a href="transactions.html">

                                <svg class="transactions-icon" viewBox='0 0 41 41' fill='none'
                                    xmlns='http://www.w3.org/2000/svg'>
                                    <path
                                        d='M23.9166 3.41675H10.2499C9.34376 3.41675 8.47472 3.77672 7.83397 4.41747C7.19322 5.05822 6.83325 5.92726 6.83325 6.83341V34.1667C6.83325 35.0729 7.19322 35.9419 7.83397 36.5827C8.47472 37.2234 9.34376 37.5834 10.2499 37.5834H30.7499C31.6561 37.5834 32.5251 37.2234 33.1659 36.5827C33.8066 35.9419 34.1666 35.0729 34.1666 34.1667V13.6667L23.9166 3.41675Z'
                                        stroke='rgb(186,218,85)' stroke-width='2' stroke-linecap='round'
                                        stroke-linejoin='round' />
                                    <path d='M23.9167 3.41675V13.6667H34.1667' stroke='rgb(186,218,85)' stroke-width='2'
                                        stroke-linecap='round' stroke-linejoin='round' />
                                    <path d='M27.3334 22.2083H13.6667' stroke='rgb(186,218,85)' stroke-width='2'
                                        stroke-linecap='round' stroke-linejoin='round' />
                                    <path d='M27.3334 29.0417H13.6667' stroke='rgb(186,218,85)' stroke-width='2'
                                        stroke-linecap='round' stroke-linejoin='round' />
                                    <path d='M17.0834 15.375H15.3751H13.6667' stroke='rgb(186,218,85)' stroke-width='2'
                                        stroke-linecap='round' stroke-linejoin='round' />
                                </svg>

                            </a>

                            <a href="raida-status.html">
                                <svg class="status-icon" fill="none" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <g stroke="#A6AAB4" stroke-linecap="round" stroke-width="1.5">
                                        <path d="m6.87988 18.1501v-2.07" />
                                        <path d="m12 18.15v-4.14" />
                                        <path d="m17.1201 18.1499v-6.22" />
                                        <path d="m17.1199 5.8501-.46.54c-2.55 2.98-5.97 5.09-9.78002 6.04" />
                                        <g stroke-linejoin="round">
                                            <path d="m14.1899 5.8501h2.93v2.92" />
                                            <path
                                                d="m9 22h6c5 0 7-2 7-7v-6c0-5-2-7-7-7h-6c-5 0-7 2-7 7v6c0 5 2 7 7 7z" />
                                        </g>
                                    </g>
                                </svg>

                            </a>

                            <!-- </div> -->

                        </div>


                    </div>

                </div>


                <!-- <div class="footer"> -->
                <!-- <div class="desktop-6-inner"> -->
                <hr class="frame-child">

                </hr>
                <div class="footer">
                    <span class="footer-text00">
                        @ 2023 RAIDAtech. All rights reserved
                    </span>
                    <a id="myAnchor1" href="http://www.gptanonymous.com/privacy" target="_blank"
                        class="footer-text"><span>Privacy
                            Policy &nbsp &nbsp Terms
                            and Services</span></a>
                </div>
                <!-- </div> -->
                <!-- </div> -->
            </div>



</body>

</html>

<script> var baseURL = "http://localhost:9898/api/v1"

    window.addEventListener('load', function () {
        getEcho()
        getTransactions();
    });


    // Get echo

    var taskId = ""
    async function getEcho() {
        try {
            const response = await fetch(`${baseURL}/echo`);
            if (response) {
                const data = await response.json();
                taskId = data.payload.id
                console.log(taskId);
                doTaskPoll(taskId)
            }
        } catch (error) {
            Swal.fire({
                title: 'Raida Servers disconnected!',
                text: "\n Connect to the servers and try again.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Okay',
            }).then((result) => {
                if (result.value) {
                    {
                        getEcho();
                    }
                }
            });

        }

    }

    // Get information about a previously created task

    const signalWrap = document.getElementById('signalWrap')
    async function doTaskPoll(taskID) {
        const response = await fetch(`${baseURL}/tasks/${taskId}`)
        if (response) {
            const data = await response.json();
            var latencies = data.payload?.data?.latencies
            console.log(latencies)
            if (data.payload.status == "completed") {
                for (let d of latencies) {
                    if (d != 0) {
                        const signalDiv = document.createElement('div')
                        signalDiv.style.backgroundColor = '#39D02B'
                        signalDiv.style.width = '5px';
                        signalDiv.style.height = '95%';
                        signalWrap.appendChild(signalDiv)
                    }
                    else {
                        const signalDiv = document.createElement('div')
                        signalDiv.style.backgroundColor = 'rgb(255, 60, 45)'
                        signalDiv.style.width = '5px';
                        signalDiv.style.height = '95%';
                        signalWrap.appendChild(signalDiv)
                    }

                }
                return
            }
            setTimeout(() => {
                doTaskPoll(taskID)
            }, 500)
        } else {
            Swal.fire({
                title: "Connection Lost!",
                text: "\n Raida cannot be connected due to lack of signal. Please check your internet connection and try again!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Okay',
            }).then((result) => {
                if (result.value) { }
            });
        }
    }

    async function getTransactions() {
        try {
            const response = await fetch(`${baseURL}/wallets/Default`);
            var data = await response.json();
            console.log(data.payload.balance)
            console.log(data.payload.transactions)
            const tabBody = document.getElementById("statements")
            if (Object.keys(data.payload.transactions).length > 0) {

                for (i = 0; i < Object.keys(data.payload.transactions).length; i++) {
                    var bal = data.payload.transactions[i].running_balance;
                    // bal1 = bal / 100000000
                    //    var bal2 = Math.round(bal * 100000000) / 100000000;

                    // var str = bal2.toString().split('.');
                    // if (str[0].length >= 5) {
                    //     str[0] = str[0].replace(/(\d)(?=(\d{3})+$)/g, '$1,');
                    // }
                    // if (str[1] && str[1].length > 3) {
                    //     str[1] = str[1].slice(0, 2) + "_" + str[1].slice(2);
                    // }
                    // if (str[1] && str[1].length > 6) {
                    //     str[1] = str[1].slice(0, 6) + "_" + str[1].slice(6);
                    // }

                    // var newBal = str.join('.');

                    var amount = data.payload.transactions[i].amount;
                    // amount1 = amount / 100000000
                    // amount2 = Math.round(amount1 * 100000000) / 100000000;
                    finalAmount = amount.toFixed(8).replace(/\.?0+$/, "");

                    var row = tabBody.insertRow(0);
                    row.style.height = "30px"
                    row.style.border = "6px solid #151515"



                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);
                    var cell5 = row.insertCell(4);


                    cell1.innerHTML = new Date(data.payload.transactions[i].datetime).toLocaleString();
                    cell1.style.fontSize = "12px"
                    cell1.style.textAlign = "center"
                    cell2.innerHTML = data.payload.transactions[i].message;
                    cell2.style.fontSize = "12px"
                    cell2.style.textAlign = "center"
                    cell3.innerHTML = data.payload.transactions[i].type;
                    cell3.style.fontSize = "12px"
                    cell3.style.textAlign = "center"
                    cell4.innerHTML = finalAmount;
                    cell4.style.color = data.payload.transactions[i].type == "GetFromLocker" ? '#39D02B' : 'red';
                    cell4.style.fontSize = "12px"
                    cell4.style.textAlign = "center"
                    cell5.innerHTML = bal;
                    cell5.style.fontSize = "12px"
                    cell5.style.textAlign = "center"

                }
            }
            else {
                const noTransactionsDiv = document.createElement('div');
                noTransactionsDiv.classList.add('d-flex');
                const text = document.createTextNode("No Transactions!");
                noTransactionsDiv.appendChild(text)
                const table1 = document.getElementById('table1');
                table1.appendChild(noTransactionsDiv);
                table1.style.overflow = "hidden"

            }
        }
        catch (error) {
            console.log(error)
        }
    }

    // function openModel() {
    //     Swal.fire({
    //         //   icon: "info",
    //         title: "Click on the link below to buy tokens",
    //         html: ' <a href="http://www.gptanonymous.com/services-4" onclick="openInNewWindow(event)"><span>http://www.gptanonymos.com/services-4</span></a>',
    //         confirmButtonText: "Okay",
    //         confirmButtonColor: "#39D02B",
    //     }).then((result) => {
    //         if (result.value) {
    //             amount.focus();
    //         }
    //     });
    //     $(".swal2-modal").css(
    //         "background",
    //         "linear-gradient( 167.95deg,  rgba(86, 86, 86, 0.86) 4.27%,#000 54.51%,#5f5f5f 91.21%)"
    //     );
    // }

</script>